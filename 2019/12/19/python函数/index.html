<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="Alone的博客" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="本文详细讲解了python中函数的用法和部分高阶特性，包括闭包，可变参数，匿名函数等 作者：徐世龙转载请注明出处！">
<meta name="keywords" content="python,函数">
<meta property="og:type" content="article">
<meta property="og:title" content="python函数详解">
<meta property="og:url" content="https:&#x2F;&#x2F;xuslone.top&#x2F;2019&#x2F;12&#x2F;19&#x2F;python%E5%87%BD%E6%95%B0&#x2F;index.html">
<meta property="og:site_name" content="Alone的博客">
<meta property="og:description" content="本文详细讲解了python中函数的用法和部分高阶特性，包括闭包，可变参数，匿名函数等 作者：徐世龙转载请注明出处！">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;s2.ax1x.com&#x2F;2019&#x2F;12&#x2F;19&#x2F;QLNEM6.png">
<meta property="og:image" content="https:&#x2F;&#x2F;s2.ax1x.com&#x2F;2019&#x2F;12&#x2F;19&#x2F;QLNkxx.png">
<meta property="og:updated_time" content="2019-12-20T02:05:13.361Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;s2.ax1x.com&#x2F;2019&#x2F;12&#x2F;19&#x2F;QLNEM6.png">

<link rel="canonical" href="https://xuslone.top/2019/12/19/python%E5%87%BD%E6%95%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>python函数详解 | Alone的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Alone的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">xuslone</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/XuSlone" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xuslone.top/2019/12/19/python%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="徐世龙">
      <meta itemprop="description" content="兰州大学 | 数据科学与大数据技术 | 机器学习 算法">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alone的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python函数详解
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-19 22:33:05" itemprop="dateCreated datePublished" datetime="2019-12-19T22:33:05+08:00">2019-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-20 10:05:13" itemprop="dateModified" datetime="2019-12-20T10:05:13+08:00">2019-12-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python%E8%AF%AD%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">python语法</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>本文详细讲解了python中函数的用法和部分高阶特性，包括闭包，可变参数，匿名函数等</p>
<p><strong>作者：徐世龙</strong><br><strong>转载请注明出处！</strong></p>
<a id="more"></a>

<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ol>
<li><a href="#ch1">python函数初探</a></li>
<li><a href="#ch2">函数的参数</a><ol>
<li><a href="#ch2.1">参数的传递——数值传递和引用传递</a></li>
<li><a href="#ch2.2">函数参数详解</a><ol>
<li><a href="#ch2.2.1">位置参数</a></li>
<li><a href="#ch2.2.2">关键字参数</a></li>
<li><a href="#ch2.2.3">默认参数</a></li>
<li><a href="#ch2.2.4">可变参数</a></li>
<li><a href="#ch2.2.5">任意参数和序列参数（逆向参数)</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#ch3">函数的返回值</a></li>
<li><a href="#ch4">偏函数（partial偏函数及用法）</a></li>
<li><a href="#ch5">函数高阶用法（函数是变量，是参数，闭包）</a></li>
<li><a href="#ch6">闭包函数 </a></li>
<li><a href="#ch7">匿名函数</a></li>
<li><a href="#ch8">Python 3函数注解：为函数参数提供类型提示信息</a></li>
</ol>
<p><a id="ch1"></a></p>
<h1 id="一、python函数初探"><a href="#一、python函数初探" class="headerlink" title="一、python函数初探"></a>一、python函数初探</h1><p>在python中函数的使用非常广泛，python中的函数分为：  </p>
<ul>
<li>内置函数</li>
<li>自定义函数   </li>
</ul>
<p>其中，内置函数有<strong>input()</strong>, <strong>print()</strong>, <strong>abs()</strong>, <strong>len()</strong> 等，内置函数可以直接使用。<br>python还支持自定义函数，所谓函数，简单点可以看成实现了特定功能的一段取了名字的代码，<br>形象来说，函数可以看成一个黑盒子，丢进去一些值可以返回处理好的一些值。如下图所示：</p>
<img src="https://s2.ax1x.com/2019/12/19/QLNEM6.png" alt="QLNEM6.png" border="0">

<p>编写一个函数需要注意以下三点：</p>
<ul>
<li>函数需要哪些变量，即函数的参数是什么</li>
<li>函数传出哪些数据，即函数的返回值是什么</li>
<li>函数在内部如何实现，即函数的实现代码是什么</li>
</ul>
<h2 id="1-在python中定义一个函数"><a href="#1-在python中定义一个函数" class="headerlink" title="1. 在python中定义一个函数"></a>1. 在python中定义一个函数</h2><p>在python中创建一个函数需要用到的关键字是<strong>def</strong>，具体的语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> 函数名称<span class="params">(参数列表)</span>:</span></span><br><span class="line">    多条语句组成的代码块</span><br><span class="line">    代码块<span class="number">1.</span>..</span><br><span class="line">    代码块<span class="number">2.</span>..</span><br><span class="line">    代码块<span class="number">3.</span>..</span><br><span class="line">    [<span class="keyword">return</span> 返回值列表]</span><br></pre></td></tr></table></figure>

<p>其中，[]扩起来的部分是可选的，也就是说，有些函数可以没有返回值</p>
<ul>
<li><strong>函数名：</strong>从语法上来说，函数名只要是一个合法的标识符就好，但是从语义上来讲，为了增加代码的可读性，我们常常根据其功能和意义使用英文单词来为函数命名，字母习惯上全部小写，不同的单词直接用下划线“_”隔开。</li>
<li><strong>参数列表</strong>：参数列表用来定义在调用函数时，需要传给函数的变量列表。参数列表中可以有多个参数，不同参数直接使用英文逗号隔开，参数名也习惯上使用具有代表意义的英文单词。注意，及时函数没有参数在函数名后仍要写“()”一对括号，并且在参数列表后不要忘记加上英文冒号。</li>
<li>如果想定义一个函数什么都不做的空函数，可以使用pass语句作为函数代码块。</li>
</ul>
<p>下面定义函数的几个程序实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">()</span>:</span><span class="comment">#定义一个函数，参数列表为空</span></span><br><span class="line">    print(<span class="string">"python是世界上最好的语言！"</span>)  <span class="comment">#功能是打印一个字符串</span></span><br><span class="line">    <span class="comment">#没有返回值</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isgood</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> name + <span class="string">" is goog!"</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_max</span><span class="params">(a,b,c)</span>:</span></span><br><span class="line">    print(<span class="string">"开始比较大小"</span>)</span><br><span class="line">    a=a <span class="keyword">if</span> a&gt;b <span class="keyword">else</span> b <span class="comment">#先比较a和b</span></span><br><span class="line">    a=a <span class="keyword">if</span> a&gt;c <span class="keyword">else</span> c <span class="comment">#再比较a和c</span></span><br><span class="line">    <span class="keyword">return</span> a          <span class="comment">#返回值是a</span></span><br></pre></td></tr></table></figure>

<h2 id="2-python中函数的调用"><a href="#2-python中函数的调用" class="headerlink" title="2. python中函数的调用"></a>2. python中函数的调用</h2><p>调用函数就是执行函数中的语句。如果定义函数是造工具，那么调用函数就是使用工具。</p>
<p>调用函数的基本语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量 = 函数名（[参数值]）</span><br></pre></td></tr></table></figure>

<p>对于上面的形式，没有参数的函数调用时不用传入参数。函数没有返回值的话不用使用变量接收，有返回值的话可以接收函数的返回值，也可以忽略返回值，直接用以下形式调用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名（[参数值]）</span><br></pre></td></tr></table></figure>

<p>注意，函数名后的英文括号不能省略。对于传入参数的要求，在[函数的参数]章节中会有详细解释。</p>
<p>下边给出调用函数的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">say_hello()        <span class="comment">#1</span></span><br><span class="line"></span><br><span class="line">a = get_max(<span class="number">5</span>,<span class="number">12</span>,<span class="number">9</span>)<span class="comment">#2</span></span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">get_max(<span class="number">5</span>,<span class="number">12</span>,<span class="number">9</span>)    <span class="comment">#3</span></span><br><span class="line"></span><br><span class="line">print(isgood(<span class="string">"python"</span>)) <span class="comment">#4</span></span><br></pre></td></tr></table></figure>

<pre><code>python是世界上最好的语言！
开始比较大小
12
开始比较大小
python is goog!</code></pre><p>从上面的代码可以看出，在2和3调用函数时，一个接收了返回值，一个没有接收返回值，但是函数都可以调用成功。对于4号语句，我们可以看出一个函数的返回值可以直接传递给另一个函数。</p>
<p><a id="ch2"></a></p>
<h1 id="二、函数的参数"><a href="#二、函数的参数" class="headerlink" title="二、函数的参数"></a>二、函数的参数</h1><p><a id="ch2.1"></a></p>
<h2 id="1-参数的传递——数值传递和引用传递"><a href="#1-参数的传递——数值传递和引用传递" class="headerlink" title="1. 参数的传递——数值传递和引用传递"></a>1. 参数的传递——数值传递和引用传递</h2><p><strong>形式参数和实际参数</strong></p>
<p>多数情况下，定义函数我们会选择有参数的形式。  </p>
<p>我们称写在参数列表里的参数为<strong>形式参数</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def foo(p1,p2,p3)  #p1,p2,p3就是形式参数</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>我们称在调用函数时传入的参数为<strong>实际参数</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(a,b,c)  <span class="comment">#a,,b，c就是实际参数</span></span><br></pre></td></tr></table></figure>

<p>实参和形参的关系形象的可以理解为演员和剧本中角色的关系。</p>
<p><strong>数值传递和引用传递</strong></p>
<p>在python中根据实参类型的不同，传递可以分为两种：  </p>
<ul>
<li><strong>值传递</strong>：用于不可变类型实参（数值，字符串，元组）</li>
<li><strong>引用传递</strong>：用处可变类型的实参（列表，字典） </li>
</ul>
<p>这两种传递的主要区别是：<br>如果是<strong>值传递</strong>，若形参在函数执行过程中发生改变，不会影响到实参的值。<br>如果是<strong>引用传递</strong>，如果形参发生改变，则实参的值也会改变。</p>
<p>下面给出程序实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></span><br><span class="line">    s += s</span><br><span class="line">    print(<span class="string">"形参为："</span>,s)</span><br><span class="line">    </span><br><span class="line">a=<span class="number">123</span></span><br><span class="line">foo(a)</span><br><span class="line">print(<span class="string">"实参为："</span>,a)</span><br><span class="line"></span><br><span class="line">b=<span class="string">'teststr'</span></span><br><span class="line">foo(b)</span><br><span class="line">print(<span class="string">"实参为："</span>,b)</span><br><span class="line"></span><br><span class="line">c=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">foo(c)</span><br><span class="line">print(<span class="string">"实参为："</span>,c)</span><br></pre></td></tr></table></figure>

<pre><code>形参为： 246
实参为： 123
形参为： teststrteststr
实参为： teststr
形参为： [1, 2, 3, 1, 2, 3]
实参为： [1, 2, 3, 1, 2, 3]</code></pre><p><a id="ch2.2"></a></p>
<h2 id="2-函数参数详解"><a href="#2-函数参数详解" class="headerlink" title="2. 函数参数详解"></a>2. 函数参数详解</h2><p><a id="ch2.2.1"></a></p>
<h3 id="①-位置参数"><a href="#①-位置参数" class="headerlink" title="① 位置参数"></a>① 位置参数</h3><p>位置参数指的是函数的参数必须按照定义时的顺序，将实际参数传到函数中，调用函数时传入的实际参数的数量和顺序必须和定义函数时一致。  </p>
<p>即<strong>形式参数和实际参数必须保持一致</strong>。  </p>
<p>一致包含两种意义</p>
<p><strong>参数数量一致</strong></p>
<p>对于下面的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_max</span><span class="params">(a,b,c)</span>:</span></span><br><span class="line">    print(<span class="string">"开始比较大小"</span>)</span><br><span class="line">    a=a <span class="keyword">if</span> a&gt;b <span class="keyword">else</span> b <span class="comment">#先比较a和b</span></span><br><span class="line">    a=a <span class="keyword">if</span> a&gt;c <span class="keyword">else</span> c <span class="comment">#再比较a和c</span></span><br><span class="line">    <span class="keyword">return</span> a          <span class="comment">#返回值是a</span></span><br></pre></td></tr></table></figure>

<p>尝试两次错误的调用查看结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(get_max(<span class="number">15</span>))</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-19-d1cb9bb1c76c&gt; in &lt;module&gt;
----&gt; 1 print(get_max(15))


TypeError: get_max() missing 2 required positional arguments: &apos;b&apos; and &apos;c&apos;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(get_max(<span class="number">12</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">19</span>))</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-18-967b2355ab10&gt; in &lt;module&gt;
----&gt; 1 print(get_max(12,4,6,19))


TypeError: get_max() takes 3 positional arguments but 4 were given</code></pre><p>可以看出都出现了报错<strong>TypeError</strong>，在报错信息中可以清楚的知道是参数传多了或者少了</p>
<p><strong>位置顺序一致</strong></p>
<p>对于下面的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_area</span><span class="params">(w,h,name)</span>:</span></span><br><span class="line">    s= w*h</span><br><span class="line">    <span class="keyword">return</span> name +<span class="string">"的面积是:"</span>+ str(s)</span><br></pre></td></tr></table></figure>

<p>尝试两种调用方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(get_area(<span class="number">4</span>,<span class="number">5</span>,<span class="string">"小长方形"</span>)) <span class="comment">#正确的</span></span><br></pre></td></tr></table></figure>

<pre><code>小长方形的面积是:20</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(get_area(<span class="string">"小长方形"</span>,<span class="number">4</span>,<span class="number">5</span>)) <span class="comment">#错误的</span></span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-25-f339745edded&gt; in &lt;module&gt;
----&gt; 1 print(get_area(&quot;小长方形&quot;,4,5))


&lt;ipython-input-23-6968b0f9f47b&gt; in get_area(w, h, name)
      1 def get_area(w,h,name):
      2     s= w*h
----&gt; 3     return name +&quot;的面积是:&quot;+ str(s)


TypeError: unsupported operand type(s) for +: &apos;int&apos; and &apos;str&apos;</code></pre><p>从上面的实例可以看出，调用函数时传入的参数必须和定义时顺序一致，否则，将会出现异常或者不符合预期的结果</p>
<p><a id="ch2.2.2"></a></p>
<h3 id="②-关键字参数"><a href="#②-关键字参数" class="headerlink" title="② 关键字参数"></a>② 关键字参数</h3><p>之前介绍的位置参数在调用时必须记住参数的位置，调用起来略有麻烦，在python中，关键字参数很好的解决了这个问题，同时和位置参数结合起来使用也更加灵活。</p>
<p>关键字参数使用形式参数的名字来确定实际参数要传入的地方，因此，使用关键字参数时不要知道参数顺序，只要将参数名写对即可。这也要求在定义函数时，参数名有更多字面含义更好理解。</p>
<p>语法形式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_volume</span><span class="params">(radius,height)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> radius*radius*<span class="number">3</span>,<span class="number">14</span>*height</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用位置参数</span></span><br><span class="line">print(get_volume(<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用关键字参数</span></span><br><span class="line">print(get_volume(radius=<span class="number">2</span>,height=<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用关键参数时可以不考虑位置</span></span><br><span class="line">print(get_volume(height=<span class="number">3</span>,radius=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以部分使用位置参数部分使用关键字参数</span></span><br><span class="line">print(get_volume(<span class="number">2</span>,height=<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<pre><code>(12, 42)
(12, 42)
(12, 42)
(12, 42)</code></pre><p>注意，如果要同时使用关键字参数和位置参数的话，关键字参数要放在位置参数之后<br><strong>下面的语句是错误的：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(get_volume(height=<span class="number">3</span>,<span class="number">2</span>)) <span class="comment">#错误写法</span></span><br></pre></td></tr></table></figure>


<pre><code>  File &quot;&lt;ipython-input-34-fd218677a620&gt;&quot;, line 1
    print(get_volume(height=3,2)) #错误写法
                             ^
SyntaxError: positional argument follows keyword argument</code></pre><p><a id="ch2.2.3"></a></p>
<h3 id="③-默认参数"><a href="#③-默认参数" class="headerlink" title="③ 默认参数"></a>③ 默认参数</h3><p>在之前的情况下，调用函数时，如果对于某个形参我们不传入实参，那么解释器将会抛出异常。  在python中解决这个问题的方法就是在定义函数的时候设置默认参数，这样在调用函数的时候，如果没有给出有默认值的形参传递实参，这个形参就会使用定义时设置的默认值。  </p>
<p>设置默认参数的语法结构如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(参数名=默认值,p2,p3...)</span>:</span></span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>

<p>下面给出几个程序样例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,p2=<span class="string">'test2'</span>,p3=<span class="string">'test3'</span>)</span>:</span></span><br><span class="line">    print(<span class="string">" 第一个参数是"</span>,p1,end=<span class="string">""</span>)</span><br><span class="line">    print(<span class="string">" 第二个参数是"</span>,p2,end=<span class="string">""</span>)</span><br><span class="line">    print(<span class="string">" 第三个参数是"</span>,p3)</span><br><span class="line">    </span><br><span class="line">foo(<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>)</span><br><span class="line"></span><br><span class="line">foo(<span class="string">'1'</span>,p3=<span class="string">'3'</span>)</span><br><span class="line"></span><br><span class="line">foo(<span class="string">'py是最好的语言'</span>)</span><br></pre></td></tr></table></figure>

<pre><code>第一个参数是 1 第二个参数是 2 第三个参数是 3
第一个参数是 1 第二个参数是 test2 第三个参数是 3
第一个参数是 py是最好的语言 第二个参数是 test2 第三个参数是 test3</code></pre><p><strong>注意！</strong>因为python规定关键字参数必须在位置参数后，所以在定义函数的时候，默认参数也必须在没有默认值的参数的后边。<br><strong>下边的定义语句是错的：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1=<span class="string">'test1'</span>,p2,p3=<span class="string">'test3'</span>)</span>:</span></span><br><span class="line">    print(<span class="string">" 第一个参数是"</span>,p1,end=<span class="string">""</span>)</span><br><span class="line">    print(<span class="string">" 第二个参数是"</span>,p2,end=<span class="string">""</span>)</span><br><span class="line">    print(<span class="string">" 第三个参数是"</span>,p3)</span><br></pre></td></tr></table></figure>


<pre><code>  File &quot;&lt;ipython-input-48-bec8b24fc7c7&gt;&quot;, line 1
    def foo(p1=&apos;test1&apos;,p2,p3=&apos;test3&apos;):
           ^
SyntaxError: non-default argument follows default argument</code></pre><p><a id="ch2.2.4"></a></p>
<h3 id="④可变参数-args-kwargs-（参数收集）"><a href="#④可变参数-args-kwargs-（参数收集）" class="headerlink" title="④可变参数(*args, ** kwargs) （参数收集）"></a>④可变参数(*args, ** kwargs) （参数收集）</h3><p>在定义函数时可以使用可变参数，也叫不定长参数，即定义了可变参数的函数在调用的时候可以传入任意多个实际参数，使用了可变参数的函数称为支持参数收集的函数</p>
<p>可变参数可以有以下两种形式：</p>
<p><strong>1）在形参前加一个*</strong> （普通参数收集）</p>
<p>语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,p2,*args)</span>:</span></span><br><span class="line">    print(args,type(args))</span><br></pre></td></tr></table></figure>

<p>在上面的语句中 args  表示定义了一个空的元组，这个元组可以接收任意多个传入的非关键字实参</p>
<p>下面给出一个程序实例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,p2,*args)</span>:</span>  <span class="comment">#定义支持可变参数的函数</span></span><br><span class="line">    print(p1,p2) </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#输出可变参数元组中的每个参数</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> args:    </span><br><span class="line">        print(i)</span><br><span class="line">        </span><br><span class="line">    <span class="comment">#输出可变参数元组,和args的类型    </span></span><br><span class="line">    print(args,type(args)) </span><br><span class="line">    </span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>)</span><br></pre></td></tr></table></figure>

<pre><code>1 2
a
b
c
d
e
(&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;) &lt;class &apos;tuple&apos;&gt;</code></pre><p>注意，python允许可变参数定义在参数列表的任意位置，但如果可变参数不在参数列表的最后，那么在可变参数后的普通参数传值时应使用关键字参数。<br>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(*args,p1)</span>:</span></span><br><span class="line">    print(p1)</span><br><span class="line">    print(args)</span><br><span class="line">    </span><br><span class="line">foo(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,p1=<span class="number">44</span>)</span><br></pre></td></tr></table></figure>

<pre><code>44
(11, 22, 33)</code></pre><p><strong>2) 在形参前加**</strong>  （关键词参数收集）</p>
<p>语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**kwargs</span><br></pre></td></tr></table></figure>

<p>*kwargs 表示定义了一个名为kwargs的空字典，这个字典可以接收任意多个以关键字参数传入的实际参数。</p>
<p>下面给出一个程序实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,p2,p3=<span class="string">'3'</span>,*args,**kwargs)</span>:</span></span><br><span class="line">    print(p1,p2,p3)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line">        print(i)</span><br><span class="line">    </span><br><span class="line">    print(kwargs,type(kwargs))</span><br><span class="line"></span><br><span class="line">foo(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="string">"函数语法讲解"</span>,<span class="string">"py是最好的语言"</span>,组长=<span class="string">"徐世龙"</span>,组员=[<span class="string">"杨宗强"</span>,<span class="string">"严新宇"</span>])</span><br></pre></td></tr></table></figure>

<pre><code>11 22 33
函数语法讲解
py是最好的语言
{&apos;组长&apos;: &apos;徐世龙&apos;, &apos;组员&apos;: [&apos;杨宗强&apos;, &apos;严新宇&apos;]} &lt;class &apos;dict&apos;&gt;</code></pre><p>值得注意的是，p3的默认值几乎不会起到作用。<br>例如下面这中调用方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(<span class="number">11</span>,<span class="number">22</span>,<span class="string">"函数语法讲解"</span>,<span class="string">"py是最好的语言"</span>,组长=<span class="string">"徐世龙"</span>,组员=[<span class="string">"杨宗强"</span>,<span class="string">"严新宇"</span>])</span><br></pre></td></tr></table></figure>

<pre><code>11 22 函数语法讲解
py是最好的语言
{&apos;组长&apos;: &apos;徐世龙&apos;, &apos;组员&apos;: [&apos;杨宗强&apos;, &apos;严新宇&apos;]} &lt;class &apos;dict&apos;&gt;</code></pre><p>（11,22,”函数语法讲解” ）分别传给了p1,p2,p3，如想让默认值起到作用，则可以使用下边的这种调用方式:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(<span class="number">11</span>,<span class="number">22</span>,组长=<span class="string">"徐世龙"</span>,组员=[<span class="string">"杨宗强"</span>,<span class="string">"严新宇"</span>])</span><br></pre></td></tr></table></figure>

<pre><code>11 22 3
{&apos;组长&apos;: &apos;徐世龙&apos;, &apos;组员&apos;: [&apos;杨宗强&apos;, &apos;严新宇&apos;]} &lt;class &apos;dict&apos;&gt;</code></pre><p><a id="ch2.2.5"></a></p>
<h3 id="⑤逆向参数收集"><a href="#⑤逆向参数收集" class="headerlink" title="⑤逆向参数收集"></a>⑤逆向参数收集</h3><p><strong>逆向参数收集</strong> 也称解包，是指程序将已有的列表，字典，元组等对象拆开后传递给函数参数的过程。<br>如果要拆开的是是元组或者列表，需要在列表前加一个*<br>如果要拆开的是字典，则需要在字典前加两个*，即**</p>
<p><strong>元组的或列表的逆向参数收集</strong> <strong>（元组列表的解包）</strong></p>
<p>下面给出一个程序实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(name,info)</span>:</span></span><br><span class="line">    print(name,info)</span><br><span class="line">    </span><br><span class="line">plist=[<span class="string">"py"</span>,<span class="string">"是最好的语言"</span>]</span><br><span class="line"></span><br><span class="line">foo(*plist)  <span class="comment">#列表名称前加一个星号</span></span><br></pre></td></tr></table></figure>

<pre><code>py 是最好的语言</code></pre><p>在上面的程序中，我们定义了一个需要两个参数的foo函数，plist中有两个元素，使用逆向收集（也称把列表解包），按顺序将列表里的元素传给形式参数。</p>
<p>对于可变参数，如果要把一个元组每一个元素传给可变参数，同样需要逆向收集，及将元组解包。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,*args)</span>:</span></span><br><span class="line">    print(p1)</span><br><span class="line">    print(args)</span><br><span class="line"></span><br><span class="line">test_tuple=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用逆向参数收集</span></span><br><span class="line">foo(*test_tuple)</span><br><span class="line"></span><br><span class="line"><span class="comment">#直接传入元组</span></span><br><span class="line">foo(test_tuple)</span><br></pre></td></tr></table></figure>

<pre><code>1
(2, 3)
(1, 2, 3)
()</code></pre><p>我们在第一次调用foo函数的时候,用参数逆向收集，即将元组test_tuple使用星号解包，将其每个元素都传给函数。函数的形参p1接收元组的第一个元素“1”，而可变参数*args接收剩下的元素，收集成一个元组（2,3）。  </p>
<p>我们第二次调用foo函数的时候，直接传入元组给p1形式参数，可变参数不传入值。</p>
<p>在这里两种调用方法的的区别需要好好体会。</p>
<p><strong>字典的逆向参数收集</strong> <strong>（字典的解包）</strong></p>
<p>对于字典的逆向收集，也称字典的解包，是指将字典中的键作为形参名，值做为实际参数，使用关键字参数传入函数。 使用的是两个星号**。  </p>
<p>程序样例如下：  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,p2,p3)</span>:</span></span><br><span class="line">    print(<span class="string">'p1是'</span>,p1)</span><br><span class="line">    print(<span class="string">'p2是'</span>,p2)</span><br><span class="line">    print(<span class="string">'p3是'</span>,p3)</span><br><span class="line">    </span><br><span class="line">test_dict=&#123;<span class="string">"p1"</span>:<span class="number">11</span>,<span class="string">"p3"</span>:<span class="number">33</span>,<span class="string">"p2"</span>:<span class="number">22</span>&#125;</span><br><span class="line">foo(**test_dict)</span><br></pre></td></tr></table></figure>

<pre><code>p1是 11
p2是 22
p3是 33</code></pre><p>注意，对于字典如果只用了一个星号，那么就相当于对字典的键的列表做了解包。此处要特别注意。  </p>
<p>例如以下程序:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1,p2,p3)</span>:</span></span><br><span class="line">    print(<span class="string">'p1是'</span>,p1)</span><br><span class="line">    print(<span class="string">'p2是'</span>,p2)</span><br><span class="line">    print(<span class="string">'p3是'</span>,p3)</span><br><span class="line">    </span><br><span class="line">test_dict=&#123;<span class="string">"p1"</span>:<span class="number">11</span>,<span class="string">"p3"</span>:<span class="number">33</span>,<span class="string">"p2"</span>:<span class="number">22</span>&#125;</span><br><span class="line">foo(*test_dict)</span><br></pre></td></tr></table></figure>

<pre><code>p1是 p1
p2是 p3
p3是 p2</code></pre><p><a id="ch3"></a></p>
<h1 id="三、函数的返回值"><a href="#三、函数的返回值" class="headerlink" title="三、函数的返回值"></a>三、函数的返回值</h1><p>在python中，函数的返回值可以返回一个值，也可以返回多个值，如果不写返回值则默认返回None。</p>
<p>下面针对这几种情况给出几个例子：  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#返回一个值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_max</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    c=a <span class="keyword">if</span> a&gt;b <span class="keyword">else</span> b</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line"></span><br><span class="line"><span class="comment">#返回多个值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_l_s</span><span class="params">(r)</span>:</span></span><br><span class="line">    l=<span class="number">2</span>*r*<span class="number">3.14</span></span><br><span class="line">    v=r*r*<span class="number">3.14</span></span><br><span class="line">    <span class="keyword">return</span> l,v</span><br><span class="line"></span><br><span class="line"><span class="comment">#没有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"hello!"</span>)</span><br><span class="line"></span><br><span class="line">result = my_max(<span class="number">22</span>,<span class="number">55</span>)</span><br><span class="line">print(result,type(result))</span><br><span class="line"></span><br><span class="line">result = get_l_s(<span class="number">2</span>)</span><br><span class="line">print(result,type(result))</span><br><span class="line"></span><br><span class="line">result = say_hello()</span><br><span class="line">print(result,type(result))</span><br></pre></td></tr></table></figure>

<pre><code>55 &lt;class &apos;int&apos;&gt;
(12.56, 12.56) &lt;class &apos;tuple&apos;&gt;
hello!
None &lt;class &apos;NoneType&apos;&gt;</code></pre><p>可以看出:<br>返回一个值时，返回的就是该对象;<br>返回多个值时，python自动将他们封装成一个元组;<br>没有return语句,默认返回为None;  </p>
<p>注意，在python中，所有东西都是对象，所以函数对象也可以作为返回值。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(p1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_foo</span><span class="params">(pp1)</span>:</span>  <span class="comment">#在函数内在定义一个函数</span></span><br><span class="line">        <span class="keyword">return</span> pp1 * p1</span><br><span class="line">    <span class="keyword">return</span> inner_foo     <span class="comment">#外层函数返回的是一个函数对象</span></span><br><span class="line"></span><br><span class="line">test_result = foo(<span class="number">5</span>)    <span class="comment">#输入5的时候，返回的是p1是5的inner_foo函数对象</span></span><br><span class="line">print(type(test_result))</span><br><span class="line">test_result(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &apos;function&apos;&gt;





10</code></pre><p>上面的代码展示了python中一个函数返回值可以是一个函数对象，这种结构在python中称作<strong>闭包</strong>，具体的内容第6章节会有详细介绍。</p>
<p><a id="ch4"></a></p>
<h1 id="四、偏函数"><a href="#四、偏函数" class="headerlink" title="四、偏函数"></a>四、偏函数</h1><p>在python中，偏函数可以理解为对原始函数的二次封装，将原来函数的部分参数设置为固定值，从而得到一个新的函数。这个函数就叫偏函数，偏函数能在一定程度上提高程序的可读性。</p>
<p>语法结构如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">偏函数名 = partial(func, *args, **kwargs)</span><br></pre></td></tr></table></figure>

<p>func是要固定某些参数值的函数，*args 和 **kwargs 分别用于接收无关键字实参和关键字实参。</p>
<p>程序样例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_mod</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a % b</span><br><span class="line"></span><br><span class="line">mod_100 = partial(get_mod,b=<span class="number">100</span>) <span class="comment">#定义偏函数，将b的值固定为100</span></span><br><span class="line"></span><br><span class="line">print(mod_100(<span class="number">23</span>))               <span class="comment">#调用新函数</span></span><br><span class="line">print(get_mod(<span class="number">23</span>,<span class="number">100</span>))           <span class="comment">#调用原函数</span></span><br></pre></td></tr></table></figure>

<pre><code>23
23</code></pre><p>在调用偏函数的时候，固定了值参数不在偏函数的参数列表里，同时剩下参数的相对位置不变。</p>
<p>偏函数的本质是将函数式编程、默认参数和冗余参数结合在一起，通过偏函数传入的参数调用关系，与正常函数的参数调用关系是一致的。</p>
<p><a id="ch5"></a></p>
<h1 id="五、函数的高阶用法"><a href="#五、函数的高阶用法" class="headerlink" title="五、函数的高阶用法"></a>五、函数的高阶用法</h1><h2 id="1-使用函数作为变量"><a href="#1-使用函数作为变量" class="headerlink" title="1.使用函数作为变量"></a>1.使用函数作为变量</h2><p>因为在Python中所有的东西都是对象，所有函数都是function对象，所以函数也可以作为值来传递给不同变量。<br>当函数传给其他变量后，可以使用该变量名当做函数名调用这个函数，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a)</span>:</span></span><br><span class="line">    print(<span class="string">"my name is "</span>,a)</span><br><span class="line">    </span><br><span class="line">my_func = foo   <span class="comment">#将foo函数赋给my_func变量</span></span><br><span class="line"></span><br><span class="line">my_func(<span class="string">"python"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>my name is  python</code></pre><p>在赋值后，my_func 和 foo 除了名称不一样，功能用法全部一样。</p>
<p>在python中，使用这种语法，可以让my_func在不同的时候指向不同的函数获得不同的功能，增加了程序的灵活性。</p>
<h2 id="2-使用函数作为形式参数"><a href="#2-使用函数作为形式参数" class="headerlink" title="2. 使用函数作为形式参数"></a>2. 使用函数作为形式参数</h2><p>既然函数可以作为值来传递给不同变量，那么函数同样可以当做形式参数，或者当做实际参数传给形式参数。</p>
<p>以下程序是函数使用函数参数的样例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_map</span><span class="params">(numlist,func)</span>:</span></span><br><span class="line">    ans=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> numlist:</span><br><span class="line">        ans.append(func(i))</span><br><span class="line">    <span class="comment">#对numlisth中的每一个元素使用传入的函数计算，再将结果添加到一个新的列表中去</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cube</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a**<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_sqrt</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> sqrt(a)</span><br><span class="line"></span><br><span class="line">numlist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#将计算立方的函数传入my_map</span></span><br><span class="line">print(my_map(numlist,cube))</span><br><span class="line"><span class="comment">#将计算平方方的函数传入my_map</span></span><br><span class="line">print(my_map(numlist,square))</span><br><span class="line"><span class="comment">#将计算开方的函数传入my_map</span></span><br><span class="line">print(my_map(numlist,my_sqrt))</span><br></pre></td></tr></table></figure>

<pre><code>[1, 8, 27, 64, 125, 216, 343]
[1, 4, 9, 16, 25, 36, 49]
[1.0, 1.4142135623730951, 1.7320508075688772, 2.0, 2.23606797749979, 2.449489742783178, 2.6457513110645907]</code></pre><p>上面可以看出，对于my_map函数，因为传入了不同的计算函数，映射出来的列表的结果也就不同。通过传入不同的函数，可以动态的改变my_map函数的部分计算代码。</p>
<h2 id="3-函数作为返回值（闭包结构）"><a href="#3-函数作为返回值（闭包结构）" class="headerlink" title="3.函数作为返回值（闭包结构）"></a>3.函数作为返回值（闭包结构）</h2><p>在第三章节的时候我们已经提到，函数的返回值可以仍然是函数。这将在下面的第6章节中进行详细讲解。</p>
<p><a id="ch6"></a></p>
<h1 id="六、-闭包函数"><a href="#六、-闭包函数" class="headerlink" title="六、 闭包函数"></a>六、 闭包函数</h1><p>闭包函数也可以理解为一种嵌套函数，和嵌套函数的不同在与，闭包函数的返回值是一个函数或者函数对象的元组，并不是一个具体的值或者是值的元组。闭包函数可以形式上分为外函数和内函数。<br>一般调用使用闭包结构的函数时，返回的函数会赋给一个变量，便于以后调用。</p>
<p>闭包需要满足三个要求：</p>
<ul>
<li>必须有一个嵌套的函数结构(function inside a function)  </li>
<li>嵌套函数必须引用封装函数里面的对象  </li>
<li>封装函数返回嵌套函数（return)   </li>
</ul>
<p>闭包的基本语法格式和调用方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> 外层函数<span class="params">(参数)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 内层函数<span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"内层函数执行"</span>, 参数)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> 内层函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">内层函数的引用 = 外层函数(<span class="string">"传入参数"</span>)</span><br><span class="line">内层函数的引用()</span><br></pre></td></tr></table></figure>

<p>下面面给出一个简单的实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(b)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> a*b</span><br><span class="line">    <span class="keyword">return</span> inner  <span class="comment"># 返回的是一个函数</span></span><br><span class="line"></span><br><span class="line">func = outer(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">func(<span class="number">2</span>),outer(<span class="number">3</span>)(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>




<pre><code>(6, 6)</code></pre><p>上面的代码，定义了一个闭包函数，外函数为outer,内函数为inner，调用外函数，传入一个参数“3”, 得到了一个新的函数对象func，其内部结构等同于以下函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>*b</span><br></pre></td></tr></table></figure>

<p>在调用函数时我们可以看到，调用func传入3 和 outer(3)(2) 是等效的。</p>
<p>下面给出两种闭包用途：</p>
<p><strong>①使用闭包保存当前运行环境</strong></p>
<p>下面是一个下棋程序的一部分，在这部分里我们希望函数每次执行时都基于上一次的执行结果。<br>假设棋盘大小为50*50，左上角为坐标系原点(0,0)，我们定义一个函数，接收方向(direction)，步长(step)2个参数，该函数控制棋子的运动。棋子运动的新的坐标除了依赖于方向和步长以外，当然还要根据原来所处的坐标点，用闭包就可以保持住这个棋子原来所处的坐标。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">origin = [<span class="number">0</span>, <span class="number">0</span>]  <span class="comment"># 坐标系统原点</span></span><br><span class="line">legal_x = [<span class="number">0</span>, <span class="number">50</span>]  <span class="comment"># x轴方向的合法坐标</span></span><br><span class="line">legal_y = [<span class="number">0</span>, <span class="number">50</span>]  <span class="comment"># y轴方向的合法坐标</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(pos=origin)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">player</span><span class="params">(direction,step)</span>:</span></span><br><span class="line">        <span class="comment"># 这里应该首先判断参数direction,step的合法性，比如direction不能斜着走，step不能为负等</span></span><br><span class="line">        <span class="comment"># 然后还要对新生成的x，y坐标的合法性进行判断处理，这里主要是介绍闭包，就不详细写了。        </span></span><br><span class="line">        <span class="keyword">nonlocal</span> pos  <span class="comment">###这一句必须有，原因下面解释###</span></span><br><span class="line">        new_x = pos[<span class="number">0</span>] + direction[<span class="number">0</span>]*step</span><br><span class="line">        new_y = pos[<span class="number">1</span>] + direction[<span class="number">1</span>]*step</span><br><span class="line">        pos= [new_x,new_y]</span><br><span class="line">        <span class="keyword">return</span> pos</span><br><span class="line">    <span class="keyword">return</span> player</span><br><span class="line"> </span><br><span class="line">player = create()   <span class="comment"># 创建棋子player，起点为原点</span></span><br><span class="line">print(player([<span class="number">1</span>,<span class="number">0</span>],<span class="number">10</span>))   <span class="comment"># 向x轴正方向移动10步</span></span><br><span class="line">print(player([<span class="number">0</span>,<span class="number">1</span>],<span class="number">20</span>))   <span class="comment"># 向y轴正方向移动20步</span></span><br><span class="line">print(player([<span class="number">-1</span>,<span class="number">0</span>],<span class="number">10</span>))  <span class="comment"># 向x轴负方向移动10步</span></span><br></pre></td></tr></table></figure>

<pre><code>[10, 0]
[10, 20]
[0, 20]</code></pre><p>在上面的程序中，一定要写上 <strong>nonlocal pos</strong> 这句，否则就会抛出异常“pos没有定义”，这是因为，<strong>python认为所有在赋值语句左边的变量，都是当前环境的局部变量，除非使用nonlocal语句显式说明，或者变量是一个容器内的值</strong>，在 <strong>pos= [new_x,new_y]</strong>  这句，如果之前不加声明，那么python就认为pos是一个局部变量，所以在 <strong>new_x = pos[0] + direction[0]*step</strong> 就会报错，解决方法有以下两种定义方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">player1</span><span class="params">(direction,step)</span>:</span></span><br><span class="line">    <span class="keyword">nonlocal</span> pos</span><br><span class="line">    new_x = pos[<span class="number">0</span>] + direction[<span class="number">0</span>]*step</span><br><span class="line">    new_y = pos[<span class="number">1</span>] + direction[<span class="number">1</span>]*step</span><br><span class="line">    pos= [new_x,new_y]</span><br><span class="line">    <span class="keyword">return</span> pos</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">player2</span><span class="params">(direction,step)</span>:</span></span><br><span class="line">    pos[<span class="number">0</span>] = pos[<span class="number">0</span>] + direction[<span class="number">0</span>]*step</span><br><span class="line">    pos[<span class="number">1</span>] = pos[<span class="number">1</span>] + direction[<span class="number">1</span>]*step</span><br><span class="line">    <span class="keyword">return</span> pos</span><br></pre></td></tr></table></figure>

<p><strong>②配置函数内部参数</strong></p>
<p>在这种情况下，闭包函数可以看成给内部函数配置内部参数，根据外部函数传入的参数，给内部实现不同的功能。</p>
<p>例如：<br>下面这个程序，可以根据传入不同的单词,返回筛选这个单词的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_filter</span><span class="params">(keep)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">the_filter</span><span class="params">(file_name)</span>:</span></span><br><span class="line">        file = open(file_name)</span><br><span class="line">        lines = file.readlines()</span><br><span class="line">        file.close()</span><br><span class="line">        filter_doc = [i <span class="keyword">for</span> i <span class="keyword">in</span> lines <span class="keyword">if</span> keep <span class="keyword">in</span> i]</span><br><span class="line">        <span class="keyword">return</span> filter_doc</span><br><span class="line">    <span class="keyword">return</span> the_filter</span><br></pre></td></tr></table></figure>

<p>我们要使用其筛选一个文件中所有含有that的行可以按如下方法调用函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filter = make_filter(<span class="string">"that"</span>)</span><br><span class="line">filter_result = filter(<span class="string">"result.txt"</span>)</span><br></pre></td></tr></table></figure>

<p><strong>③编写装饰器</strong></p>
<p>装饰器本质上是一个 Python 函数或类，它可以让其他函数或类在不需要做任何代码修改的前提下增加额外功能，装饰器的返回值也是一个函数/类对象。装饰器的是通过闭包结构实现的。</p>
<p>下面给出一个装饰器的简单实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timeit</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">()</span>:</span></span><br><span class="line">        start = time.perf_counter()</span><br><span class="line">        func()</span><br><span class="line">        end =time.perf_counter()</span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'used:'</span>, end - start)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@timeit</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span> </span><br><span class="line">    <span class="keyword">print</span> (<span class="string">' do f1 '</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@timeit</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span> </span><br><span class="line">    <span class="number">5555</span>**<span class="number">5555</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">' do f2 '</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line">f2()</span><br></pre></td></tr></table></figure>

<pre><code> do f1 
used: 9.379999937664252e-05
 do f2 
used: 0.0009176000003208173</code></pre><p>上面的的程序定义了一个给函数增加计算运行时间功能的装饰器。</p>
<p>装饰器不仅可以用于函数，也可以用于类和方法。<br>更多有关装饰器的内容请参考:<br><a href="https://realpython.com/primer-on-python-decorators/" target="_blank" rel="noopener">https://realpython.com/primer-on-python-decorators/</a><br><a href="https://www.geeksforgeeks.org/decorators-in-python/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/decorators-in-python/</a></p>
<p><a id="ch7"></a></p>
<h1 id="七、匿名函数（lambda表达式）"><a href="#七、匿名函数（lambda表达式）" class="headerlink" title="七、匿名函数（lambda表达式）"></a>七、匿名函数（lambda表达式）</h1><p>如果说函数是命名的、方便复用的代码块，那么 lambda 表达式则是功能更灵活的代码块，它可以在程序中被传递和调用。</p>
<p>所谓匿名，即不再使用def语句这样标准的形式定义一个函数。</p>
<ul>
<li>lambda只是一个表达式,而不是一个代码块，函数体比def简单很多。</li>
<li>仅仅能在lambda表达式中封装有限的逻辑。</li>
<li>lambda 函数拥有自己的命名空间。</li>
</ul>
<p>匿名函数通常语法结构如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> 参数表:返回值表达式</span><br></pre></td></tr></table></figure>

<p>样例程序如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x:x*x</span><br><span class="line"></span><br><span class="line"><span class="comment">#等价于 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x*x</span><br></pre></td></tr></table></figure>

<p>①有些时候，我们需要用到一个简单的函数，但是为这函数单独命名一个名字未免有些繁琐，这时使用匿名函数会使代码更简洁编写更方便。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_math_func</span><span class="params">(type)</span> :</span></span><br><span class="line">    <span class="comment"># 定义一个计算平方的局部函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(n)</span> :</span>  <span class="comment"># ①</span></span><br><span class="line">        <span class="keyword">return</span> n * n</span><br><span class="line">    <span class="comment"># 定义一个计算立方的局部函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cube</span><span class="params">(n)</span> :</span>  <span class="comment"># ②</span></span><br><span class="line">        <span class="keyword">return</span> n * n * n</span><br><span class="line">    <span class="comment"># 定义一个计算阶乘的局部函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span> :</span>   <span class="comment"># ③</span></span><br><span class="line">        result = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">2</span> , n + <span class="number">1</span>):</span><br><span class="line">            result *= index</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="comment"># 返回局部函数</span></span><br><span class="line">    <span class="keyword">if</span> type == <span class="string">"square"</span> :</span><br><span class="line">        <span class="keyword">return</span> square</span><br><span class="line">    <span class="keyword">if</span> type == <span class="string">"cube"</span> :</span><br><span class="line">        <span class="keyword">return</span> cube</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> factorial</span><br></pre></td></tr></table></figure>

<p>对于上面的函数，我们可以使用lambda表达式进行优化，使代码更简洁。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_math_func</span><span class="params">(type)</span> :</span></span><br><span class="line">    result=<span class="number">1</span></span><br><span class="line">    <span class="comment"># 该函数返回的是Lambda表达式</span></span><br><span class="line">    <span class="keyword">if</span> type == <span class="string">'square'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">lambda</span> n: n * n  </span><br><span class="line">    <span class="keyword">elif</span> type == <span class="string">'cube'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">lambda</span> n: n * n * n  </span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">lambda</span> n: (<span class="number">1</span> + n) * n / <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>②lambda表达式定义的匿名函数也可以作为实际参数传给形式参数</p>
<p>对于第五章中的函数我们还可以用以下方式调用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_map</span><span class="params">(numlist,func)</span>:</span></span><br><span class="line">    ans=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> numlist:</span><br><span class="line">        ans.append(func(i))</span><br><span class="line">    <span class="comment">#对numlisth中的每一个元素使用传入的函数计算，再将结果添加到一个新的列表中去</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_list=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">my_map(my_list, <span class="keyword">lambda</span> x:x**<span class="number">2</span> )</span><br></pre></td></tr></table></figure>




<pre><code>[1, 4, 9, 16, 25, 36]</code></pre><p>可以看出，传入的函数不需要定义名称，传入lambda表达式可以有同样的作用。</p>
<p><a id="ch8"></a></p>
<h1 id="八、Python-3函数注解"><a href="#八、Python-3函数注解" class="headerlink" title="八、Python 3函数注解"></a>八、Python 3函数注解</h1><p>函数注解是 Python 3 最独特的功能之一，官方文档描述为：“函数注解是关于用户自定义函数使用类型的完全可选的元信息”。即官方将函数注解的用途归结为：为函数中的形参和返回值提供类型提示信息。</p>
<p>先给出一个样例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(number:int)</span>-&gt;int:</span></span><br><span class="line">    <span class="keyword">return</span> number**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(ham:str,egg:str=<span class="string">'eggs'</span>)</span>-&gt;str:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">print(f.__annotations__)</span><br></pre></td></tr></table></figure>

<pre><code>{&apos;ham&apos;: &lt;class &apos;str&apos;&gt;, &apos;egg&apos;: &lt;class &apos;str&apos;&gt;, &apos;return&apos;: &lt;class &apos;str&apos;&gt;}</code></pre><p>如上所示：</p>
<ul>
<li>给函数中的参数做注解的方法是在形参后添加冒号“：”，后接需添加的注解（可以是类，如 str、int 等，也可以是字符串或者表示式）；</li>
<li>给返回值做注解的方法是将注解添加到 def 语句结尾的冒号和 -&gt; 之间。</li>
<li><strong>注意</strong>，如果参数有默认值，参数注解位于冒号和等号之间。比如 eggs:str=’eggs’，它表示 eggs 参数的默认值为 ‘eggs’，添加的注解为 str。</li>
</ul>
<p>函数的注解保存在函数对象的 <strong>annotations</strong> 中，这是一个字典，可以获取这个属性在程序中获得注解，以检查类型等。同时在有自动补全的编辑器内，注解可以提示用户函数的参数类型，使程序的编写更加方便。</p>
<img src="https://s2.ax1x.com/2019/12/19/QLNkxx.png" alt="QLNkxx.png" border="0">

<p>PEP 3107 作为提议函数注解的官方文档，其中列出了以下可能的使用场景：</p>
<ul>
<li>提供类型信息：包括类型检查、让 IDE 显示函数接受和返回的类型、适配、与其他语言的桥梁、数据库查询映射、RPC参数编组等；</li>
<li>其他信息：函数参数和返回值的文档。</li>
</ul>
<p>关于注解更多信息请参阅：<a href="https://docs.python.org/zh-cn/3/library/typing.html?highlight=annotation" target="_blank" rel="noopener">https://docs.python.org/zh-cn/3/library/typing.html?highlight=annotation</a></p>
<p><strong>作者：徐世龙</strong><br><strong>转载请注明出处！</strong></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/%E5%87%BD%E6%95%B0/" rel="tag"># 函数</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2019/12/14/selenium_py/" rel="next" title="Selenium库使用简介">
                  <i class="fa fa-chevron-left"></i> Selenium库使用简介
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#目录"><span class="nav-number">1.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、python函数初探"><span class="nav-number">2.</span> <span class="nav-text">一、python函数初探</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-在python中定义一个函数"><span class="nav-number">2.1.</span> <span class="nav-text">1. 在python中定义一个函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-python中函数的调用"><span class="nav-number">2.2.</span> <span class="nav-text">2. python中函数的调用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、函数的参数"><span class="nav-number">3.</span> <span class="nav-text">二、函数的参数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-参数的传递——数值传递和引用传递"><span class="nav-number">3.1.</span> <span class="nav-text">1. 参数的传递——数值传递和引用传递</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-函数参数详解"><span class="nav-number">3.2.</span> <span class="nav-text">2. 函数参数详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#①-位置参数"><span class="nav-number">3.2.1.</span> <span class="nav-text">① 位置参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#②-关键字参数"><span class="nav-number">3.2.2.</span> <span class="nav-text">② 关键字参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#③-默认参数"><span class="nav-number">3.2.3.</span> <span class="nav-text">③ 默认参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#④可变参数-args-kwargs-（参数收集）"><span class="nav-number">3.2.4.</span> <span class="nav-text">④可变参数(*args, ** kwargs) （参数收集）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#⑤逆向参数收集"><span class="nav-number">3.2.5.</span> <span class="nav-text">⑤逆向参数收集</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、函数的返回值"><span class="nav-number">4.</span> <span class="nav-text">三、函数的返回值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、偏函数"><span class="nav-number">5.</span> <span class="nav-text">四、偏函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、函数的高阶用法"><span class="nav-number">6.</span> <span class="nav-text">五、函数的高阶用法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-使用函数作为变量"><span class="nav-number">6.1.</span> <span class="nav-text">1.使用函数作为变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-使用函数作为形式参数"><span class="nav-number">6.2.</span> <span class="nav-text">2. 使用函数作为形式参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-函数作为返回值（闭包结构）"><span class="nav-number">6.3.</span> <span class="nav-text">3.函数作为返回值（闭包结构）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、-闭包函数"><span class="nav-number">7.</span> <span class="nav-text">六、 闭包函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、匿名函数（lambda表达式）"><span class="nav-number">8.</span> <span class="nav-text">七、匿名函数（lambda表达式）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#八、Python-3函数注解"><span class="nav-number">9.</span> <span class="nav-text">八、Python 3函数注解</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">徐世龙</p>
  <div class="site-description" itemprop="description">兰州大学 | 数据科学与大数据技术 | 机器学习 算法</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="chat motion-element"><i class="fa fa-comment"></i>
    Chat
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/XuSlone" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;XuSlone" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/mailto:hsuslone86@gmail.com" title="E-Mail → mailto:hsuslone86@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://wpa.qq.com/msgrd?v=3&uin=530825293&site=qq&menu=yes" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v=3&amp;uin=530825293&amp;site=qq&amp;menu=yes" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QQ</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://xuslone.top/" title="http:&#x2F;&#x2F;xuslone.top">Title</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">徐世龙</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.5.0
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>



  
















  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'c91471682b49cb40729a',
      clientSecret: '8d76409a8c539fafa27a00133127587d4f9074ef',
      repo: 'XuSlone.github.io',
      owner: 'XuSlone',
      admin: ['XuSlone'],
      id: 'dc2fe0f0799c9ee330711b6d2b853d48',
        language: 'zh-CN',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
